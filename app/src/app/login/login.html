<div class="login-container">
  <div class="login-logo">
    <h1>MoodleClone</h1>
    <p>Plateforme d'apprentissage</p>
  </div>

  <div *ngIf="errorMessage" class="login-error">{{ errorMessage }}</div>

  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email" id="email" formControlName="email" class="form-control"
             autocomplete="email" placeholder="votre@email.com">
      <div class="error" *ngIf="loginForm.get('email')?.invalid && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)">
        <span *ngIf="loginForm.get('email')?.errors?.['required']">Veuillez saisir votre e-mail</span>
        <span *ngIf="loginForm.get('email')?.errors?.['email']">Format d'e-mail invalide</span>
      </div>
    </div>

    <div class="form-group">
      <label for="password">Mot de passe</label>
      <div class="password-input-container">
        <input [type]="hidePassword ? 'password' : 'text'" id="password" formControlName="password"
               class="form-control" autocomplete="current-password" placeholder="Votre mot de passe">
        <span class="toggle-password" (click)="togglePasswordVisibility()">
          <i class="fas" [class.fa-eye]="hidePassword" [class.fa-eye-slash]="!hidePassword"></i>
        </span>
      </div>
      <div class="error" *ngIf="loginForm.get('password')?.invalid && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)">
        <span *ngIf="loginForm.get('password')?.errors?.['required']">Veuillez saisir votre mot de passe</span>
      </div>
    </div>

    <button class="login-button" type="submit" [disabled]="loginForm.invalid || isLoading">
      <span *ngIf="isLoading">Connexion en cours...</span>
      <span *ngIf="!isLoading">Se connecter</span>
    </button>
  </form>

  <div *ngIf="mockData" class="login-footer">
    <div class="demo-accounts">
      <h4>Comptes de démonstration :</h4>
      <p><strong>Étudiant :</strong> student&#64;example.com</p>
      <p><strong>Enseignant :</strong> teacher&#64;example.com</p>
      <p><strong>Administrateur :</strong> admin&#64;example.com</p>
      <p><strong>Admin/Enseignant :</strong> teacher.admin&#64;example.com</p>
      <small>Mot de passe : n'importe lequel</small>
    </div>
  </div>
</div>
